import { Button } from "bootstrap";
$(document).ready(function() {
    const API_URL = 'https://api.example.com/best-authors'; // Initialize the best authors list
    fetchBestAuthors();

const onFetchBestAuthorsClick = () => {
    const data = onFetchBestAuthorsClick
}
function fetchBestAuthors() {

    return []
}
const bestAuthorsContainer = document.getElementById('bestAuthors'). addEventListener('add', async function(event) {
    event.preventDefault();
    await createBestAuthors();
});

// Function fetches all authors from the API
async function getBestAuthors() {
    try {
        const response = await fetch('https://api.example.com/best-authors');
        const data = await response.json();
        return bestAuthors;
    } catch (error) {
        console.error('Error fetching best authors:', error);
        return [];
    }
}

// Adds a new author to the list in API
 async function addBestAuthors(text) {
    try {
      const response = await fetch(API_URL, {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          text: text,
          completed: false,
        }),
      });
      const bestAuthors = await response.json();
      return bestAuthors;
    } catch (error) {
      console.error("Error adding bestAuthors:", error);
      return null;
    }
  }
// Deletes an author from the API list

async function deleteBestAuthors(id) {
    try {
        const response = await fetch(`${API_URL}/${id}`, {
            method: "DELETE",
        });
        return true;
    } catch (error) {
        console.error("Error deleting bestAuthors:", error);
        return false;
    }
}

// Function to fetch from API

const bestAuthors = await fecthBestAuthors(); 

// async function fetchBestAuthors() {
//     try {
//         const response = await fetch(API_URL);
//         const data = await response.json();
//         return data;
//     } catch (error) {
//         console.error("Error fetching bestAuthors:", error);
//         return [];
//     }
// }

// Function to render/integrating the best authors into the HTML
function render() {
    this.bestauthors= bestAuthors;
    $(`bestAuthorsContainer`).empty();

    bestAuthors.forEach(author => {
        const li = document.createElement('li');
        li.textContent = author.name;

       
        // Create delete button
        const deleteButton = document.createElement('button');
        deleteButton.className = 'btn btn-danger btn-sm float-end';
        deleteButton.textContent = 'Delete';
        deleteButton.addEventListener('click', async () => {
            if (await deleteBestAuthors(author.id)) {
                li.remove();
            }
        });

        li.appendChild(deleteButton);
        bestAuthorsContainer.appendChild(li);
    });
 }


//<button type="button" class="btn btn-danger" id=$(bestAuthorsContainer.id)>Delete</button>


}) 